<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280"> <title>Project Detail | Nayeon Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600&display=swap");
        
        /* 1. 배경을 인덱스와 똑같은 회색으로 설정 */
body { 
    margin: 0; padding: 0; background-color: #f4f3f3; /* 인덱스와 동일한 배경색 */
    display: flex; justify-content: center; align-items: flex-start;
    min-width: 1280px; 
}

/* [핵심] 폴더 몸통 너비에 딱 맞춘 컨테이너 */
.detail-wrapper {
    width: 1100px; 
    background-color: #ffffff;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    /* 폴더의 입체감을 살리는 그림자와 라운딩 */
    box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
    margin-top: 60px; /* 폴더 탭이 있을 자리를 비워둠 */
    border-radius: 12px 12px 0 0; 
}

/* 내부 콘텐츠가 폴더 벽에 너무 붙지 않게 조정 */
main {
    padding: 80px 100px; 
}

/* 헤더와 푸터도 1100px 안으로 정렬 */
header, footer {
    width: 100%;
    box-sizing: border-box;
}

        /* 이미지 사이 넉넉한 간격 */
        .project-image { width: 100%; display: block; margin-bottom: 80px; }
        
        header, footer { width: 100%; max-width: 1280px; }
    </style>
</head>
<body>
    <div class="detail-wrapper">
        <header class="h-[80px] px-16 flex justify-between items-center border-b border-gray-50">
            <a href="index.html" class="text-[16px] source-font font-bold">kimnayeon</a>
            <div class="flex gap-8 text-[14px] source-font opacity-60">
                <span>email</span><span>blog</span><span>instagram</span>
            </div>
        </header>

        <main class="px-20 pt-20 pb-40">
            <div class="flex justify-between items-end mb-12">
                <div>
                    <h1 id="p-title" class="text-[48px] font-bold korean-style leading-tight">로딩 중...</h1>
                    <p id="p-year" class="text-[22px] source-font opacity-40 mt-2"></p>
                </div>
                <div class="text-right">
                    <span class="text-[12px] source-font font-bold px-2 py-1 bg-gray-100 rounded text-gray-500">작업기여도</span>
                    <div class="text-[64px] font-bold source-font leading-none mt-2 text-[#333]">100%</div>
                </div>
            </div>

            <div class="info-box mb-24">
                <div class="grid grid-cols-[1.5fr_1fr] gap-16">
                    <div>
                        <h3 class="source-font font-bold text-[18px] mb-4 text-[#444]">Scope.</h3>
                        <p id="p-scope" class="korean-style text-[18px] leading-[1.6] text-[#666]">
                            데이터를 불러오는 중입니다.
                        </p>
                    </div>
                    <div class="grid grid-cols-1 gap-8">
                        <div>
                            <h3 class="source-font font-bold text-[18px] mb-2 text-[#444]">Client.</h3>
                            <p id="p-client" class="korean-style text-[18px] text-[#666]">-</p>
                        </div>
                        <div>
                            <h3 class="source-font font-bold text-[18px] mb-2 text-[#444]">Date.</h3>
                            <p id="p-date" class="source-font text-[18px] text-[#666]">-</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="p-images" class="w-full">
                </div>
        </main>

        <footer class="px-16 py-16 border-t border-gray-50 flex justify-between items-end">
            <img src="img/ny-logo.svg" class="h-12 opacity-80" alt="logo" onerror="this.style.opacity='0.2'">
            <div class="text-right text-[13px] source-font text-gray-400 leading-relaxed">
                email: oliveves@naver.com<br>
                contact: 010 3017 2099<br>
                Designed & Archived by Nayeon. © 2026
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const SUPABASE_URL = 'https://bzencnamkphzioevirtj.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_811Q7O6I20MFaQFeM_mcuA_KYFY8s2e';
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function loadProjectDetail() {
            const urlParams = new URLSearchParams(window.location.search);
            const projectId = urlParams.get('id');

            if (!projectId) return;

            const { data: p, error } = await supabaseClient
                .from('project')
                .select('*')
                .eq('id', projectId)
                .single();

            if (p) {
                document.getElementById('p-title').innerText = p.title;
                document.getElementById('p-year').innerText = p.year;
                document.getElementById('p-scope').innerHTML = p.detail_content ? p.detail_content.replace(/\n/g, '<br>') : '내용 없음';
                document.getElementById('p-client').innerText = p.client || '-';
                document.getElementById('p-date').innerText = p.date_range || p.year;

                if (p.detail_images) {
                    const imgContainer = document.getElementById('p-images');
                    const images = p.detail_images.split(',');
                    imgContainer.innerHTML = images.map(url => 
                        `<img src="${url.trim()}" class="project-image" alt="detail image">`
                    ).join('');
                }
            }
        }
        loadProjectDetail();
    </script>
</body>
</html>